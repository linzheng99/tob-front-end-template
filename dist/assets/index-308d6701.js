import{_ as F}from"./HandleUserModal.vue_vue_type_script_setup_true_lang-88555fa8.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-fb76c1e8.js";import{u as q,F as U}from"./useForm-417a659a.js";import{e as z,f as o,ao as g,aK as A,Y as B,Z as M,$ as n,a5 as v,a3 as I,a8 as r,ac as c,aX as S,_ as T,aY as V}from"./index-d0818fe1.js";import{c as E}from"./index-a55e0f6c.js";import"./index-443f46b2.js";import"./index-fab1141e.js";import"./index-1ef2f010.js";import"./createPlaceholder-447273ac.js";const G={class:"h-flex-col"},L={class:"mb-4 flex gap-2"},W=z({__name:"index",setup(D){const p=o(),u=o(),i=o({}),d=o(),m=o("add"),[k,{getFieldsValue:h,resetFields:x}]=q({schemas:b(),showActionButtonGroup:!1,gridProps:{cols:4,xGap:10,yGap:0}});function b(){return[{field:"username",component:"NInput",label:"用户名",componentProps:{placeholder:"请输入用户名"}},{field:"nickName",component:"NInput",label:"昵称",componentProps:{placeholder:"请输入昵称"}},{field:"email",component:"NInput",label:"邮箱",componentProps:{placeholder:"请输入邮箱"}}]}const f=o([]),w=g([{title:"序号",key:"index",width:60,align:"center",render:(t,e)=>`${e+1}`},{title:"用户名",key:"username",ellipsis:{tooltip:!0}},{title:"昵称",key:"nickName",ellipsis:{tooltip:!0}},{title:"邮箱",key:"email",ellipsis:{tooltip:!0}},{title:"是否冻结",key:"isFrozen",ellipsis:{tooltip:!0},render:t=>t.isFrozen?"冻结":"未冻结"},{title:"创建时间",key:"createTime",ellipsis:{tooltip:!0}},{title:"更新时间",key:"updateTime",ellipsis:{tooltip:!0}}]),C=g({key:"_action",title:"操作",align:"center",fixed:"right",width:260,actions:()=>N()});function N(){return[{iconConfig:{icon:"ep-edit"},title:"编辑"},{iconConfig:{icon:"ep-delete"},title:"删除",componentProps:{type:"error"}}]}async function R(t){const{title:e,record:a}=t;switch(e){case"编辑":_("edit",a.id);break;case"删除":E({content:{type:"warning"},onPositiveClick:async()=>{await V(a.id),s("search")}});break}}function $(t){f.value=t}async function y(t){var e;await((e=p.value)==null?void 0:e.reloadData(t))}function _(t,e){var a;m.value=t,d.value=e||void 0,(a=u.value)==null||a.toggleModal()}async function s(t){t==="search"?i.value=h():i.value=x(),await y(i.value)}return A(async()=>{await y()}),(t,e)=>{const a=T;return B(),M("div",G,[n(U,{"label-width":"auto","label-align":"left",onRegister:v(k)},null,8,["onRegister"]),I("div",L,[n(a,{type:"primary",size:"small",onClick:e[0]||(e[0]=l=>_("add"))},{default:r(()=>[c(" 新增用户 ")]),_:1}),n(a,{type:"primary",size:"small",onClick:e[1]||(e[1]=l=>s("search"))},{default:r(()=>[c(" 查询 ")]),_:1}),n(a,{type:"primary",size:"small",onClick:e[2]||(e[2]=l=>s("clear"))},{default:r(()=>[c(" 清空 ")]),_:1})]),n(P,{ref_key:"tableElRef",ref:p,class:"flex-1",data:f.value,columns:w,"action-column":C,"flex-height":!1,"request-api":v(S),"request-params":i.value,onRequestSuccess:$,onHandleAction:R},null,8,["data","columns","action-column","request-api","request-params"]),n(F,{id:d.value,ref_key:"handleUserModalRef",ref:u,type:m.value,onSuccess:e[3]||(e[3]=l=>s("search"))},null,8,["id","type"])])}}});export{W as default};
