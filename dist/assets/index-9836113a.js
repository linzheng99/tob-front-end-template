import{_ as h}from"./HandleMenuModal.vue_vue_type_script_setup_true_lang-389665f4.js";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang-3e5308f3.js";import{e as M,f as l,ao as d,aI as w,Y as x,Z as C,a3 as b,$ as r,a8 as A,ac as B,b2 as N,_ as $,b3 as V}from"./index-7b7dfb38.js";import{c as D}from"./index-a55e0f6c.js";import"./useForm-60c9b58b.js";import"./createPlaceholder-6fcd5da5.js";import"./index-9b819191.js";const E={class:"h-flex-col"},L={class:"mb-2.5"},Z=M({__name:"index",setup(P){const n=l(),u=l([]),s=l(),o=l("add"),p=d([{title:"菜单名称",key:"meta",ellipsis:{tooltip:!0},render(e){var t;return(t=e.meta)==null?void 0:t.title}},{title:"菜单图标",key:"meta",ellipsis:{tooltip:!0},render(e){var t;return(t=e.meta)==null?void 0:t.icon}},{title:"菜单地址",key:"path",ellipsis:{tooltip:!0}},{title:"权限标识",key:"permission",ellipsis:{tooltip:!0}},{title:"排序",key:"orderNo",ellipsis:{tooltip:!0}},{title:"路由名称",key:"name",ellipsis:{tooltip:!0}},{title:"路由组件 / 组件地址",key:"component",ellipsis:{tooltip:!0}},{title:"路由重定向",key:"redirect",ellipsis:{tooltip:!0}}]),m=d({key:"_action",title:"操作",align:"center",fixed:"right",width:260,actions:()=>_()});async function f(e){var i;const{title:t,record:a}=e;switch(s.value=a,t){case"新增":o.value="add",(i=n.value)==null||i.toggleModal();break;case"编辑":g();break;case"删除":k(a.id);break}}function _(){return[{iconConfig:{icon:"ep-plus"},title:"新增"},{iconConfig:{icon:"ep-edit"},title:"编辑"},{iconConfig:{icon:"ep-delete"},title:"删除",componentProps:{type:"error"}}]}function y(){var e;o.value="add",s.value={},(e=n.value)==null||e.toggleModal()}function g(){var e;o.value="edit",(e=n.value)==null||e.toggleModal()}async function k(e){D({content:{type:"warning"},onPositiveClick:async()=>{var t;await V(e),(t=window.$message)==null||t.success("删除成功"),await c()}})}async function c(){u.value=await N()}return w(async()=>{await c()}),(e,t)=>{var i;const a=$;return x(),C("div",E,[b("div",L,[r(a,{type:"primary",size:"small",onClick:y},{default:A(()=>t[0]||(t[0]=[B(" 新增菜单 ")])),_:1})]),r(v,{class:"flex-1",data:u.value,columns:p,"action-column":m,"show-pagination":!1,"flex-height":!1,onHandleAction:f},null,8,["data","columns","action-column"]),r(h,{id:(i=s.value)==null?void 0:i.id,ref_key:"handleMenuModalRef",ref:n,type:o.value,onSuccess:c},null,8,["id","type"])])}}});export{Z as default};
