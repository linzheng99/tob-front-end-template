import{b7 as ce,b8 as Ie,b9 as Xe,ba as $e,bb as Ge,bc as Qe,bd as je,be as ze,bf as ve,bg as Je,bh as Ue,bi as Ke,bj as Ze,bk as et,bl as tt,f as S,J as nt,j as k,a5 as w,ar as oe,N as rt,bm as at,bn as ot,bo as it,bp as st,bq as ct,br as ut,g as L,bs as Pe,e as J,w as te,bt as U,bu as Ce,bv as ue,aJ as re,bw as dt,Y as _,a4 as X,a8 as j,ac as ie,a9 as xe,aS as de,Z as K,$ as ae,bx as se,ap as Oe,aq as Me,X as lt,by as ft,aa as Se,_ as _e,bz as mt}from"./index-bf5d60c1.js";import{c as ht,s as le}from"./createPlaceholder-c9a6ecf0.js";var fe=ce?ce.isConcatSpreadable:void 0;function gt(t){return Ie(t)||Xe(t)||!!(fe&&t&&t[fe])}function De(t,e,n,r,a){var o=-1,i=t.length;for(n||(n=gt),a||(a=[]);++o<i;){var c=t[o];e>0&&n(c)?e>1?De(c,e-1,n,r,a):$e(a,c):r||(a[a.length]=c)}return a}function bt(t){var e=t==null?0:t.length;return e?De(t,1):[]}function wt(t){return Ge(Qe(t,void 0,bt),t+"")}function yt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function pt(t,e){return e.length<2?t:je(t,ze(e,0,-1))}function kt(t,e){return e=ve(e,t),t=pt(t,e),t==null||delete t[Je(yt(e))]}function vt(t){return Ue(t)?void 0:t}var Pt=1,Ct=2,xt=4,Ot=wt(function(t,e){var n={};if(t==null)return n;var r=!1;e=Ke(e,function(o){return o=ve(o,t),r||(r=o.length>1),o}),Ze(t,et(t),n),r&&(n=tt(n,Pt|Ct|xt,vt));for(var a=e.length;a--;)kt(n,e[a]);return n});const Mt=Ot,St=10,_t=[10,20,30,40,50];function Dt(t){const{showPagination:e}=t,n=S({});nt(()=>t.pagination,i=>{i&&o(i)});const r=k(()=>{if(!e)return!1;const{pagination:i}=t;return{page:1,pageSize:St,pageSizes:_t,itemCount:0,showQuickJumper:!0,showSizePicker:!0,displayOrder:["size-picker","pages","quick-jumper"],prefix:({itemCount:c})=>`共 ${c} 项数据`,...i,...w(n)}});function a(){return w(r)}function o(i){oe(n.value,i)}return{getPagination:a,setPagination:o}}function Et(){const t=S(!1),e=k(()=>w(t));function n(r){t.value=r}return{getLoading:e,setLoading:n}}function Wt(t){const{requestApi:e,setLoading:n,setPagination:r,getPagination:a,emit:o}=t;async function i(c){if(!e)return;const l={},f=a();if(f){const{page:h,pageSize:b}=f;oe(l,{page:h,pageSize:b})}try{n(!0);const h=await e({...l,...c}),{items:b,totalItems:C}=h;return r({itemCount:C}),o("request-success",b),b}catch(h){throw o("request-error"),new Error(`${h}`)}finally{n(!1)}}return{requestData:i}}function O(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function B(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const Ee=6048e5,Tt=864e5;let Nt={};function ee(){return Nt}function z(t,e){var c,l,f,h;const n=ee(),r=(e==null?void 0:e.weekStartsOn)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,a=O(t),o=a.getDay(),i=(o<r?7:0)+o-r;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function Z(t){return z(t,{weekStartsOn:1})}function We(t){const e=O(t),n=e.getFullYear(),r=B(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Z(r),o=B(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=Z(o);return e.getTime()>=a.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function me(t){const e=O(t);return e.setHours(0,0,0,0),e}function he(t){const e=O(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Yt(t,e){const n=me(t),r=me(e),a=+n-he(n),o=+r-he(r);return Math.round((a-o)/Tt)}function Ft(t){const e=We(t),n=B(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Z(n)}function Rt(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function qt(t){if(!Rt(t)&&typeof t!="number")return!1;const e=O(t);return!isNaN(Number(e))}function Vt(t){const e=O(t),n=B(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const At={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lt=(t,e,n)=>{let r;const a=At[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ne(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Bt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ht={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},It={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Xt={date:ne({formats:Bt,defaultWidth:"full"}),time:ne({formats:Ht,defaultWidth:"full"}),dateTime:ne({formats:It,defaultWidth:"full"})},$t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Gt=(t,e,n,r)=>$t[t];function G(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):i;a=t.formattingValues[c]||t.formattingValues[i]}else{const i=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(e):e;return a[o]}}const Qt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ut={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Kt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zt=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},en={ordinalNumber:Zt,era:G({values:Qt,defaultWidth:"wide"}),quarter:G({values:jt,defaultWidth:"wide",argumentCallback:t=>t-1}),month:G({values:zt,defaultWidth:"wide"}),day:G({values:Jt,defaultWidth:"wide"}),dayPeriod:G({values:Ut,defaultWidth:"wide",formattingValues:Kt,defaultFormattingWidth:"wide"})};function Q(t){return(e,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(a);if(!o)return null;const i=o[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(c)?nn(c,b=>b.test(i)):tn(c,b=>b.test(i));let f;f=t.valueCallback?t.valueCallback(l):l,f=n.valueCallback?n.valueCallback(f):f;const h=e.slice(i.length);return{value:f,rest:h}}}function tn(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function nn(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function rn(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const a=r[0],o=e.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const c=e.slice(a.length);return{value:i,rest:c}}}const an=/^(\d+)(th|st|nd|rd)?/i,on=/\d+/i,sn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cn={any:[/^b/i,/^(a|c)/i]},un={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dn={any:[/1/i,/2/i,/3/i,/4/i]},ln={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wn={ordinalNumber:rn({matchPattern:an,parsePattern:on,valueCallback:t=>parseInt(t,10)}),era:Q({matchPatterns:sn,defaultMatchWidth:"wide",parsePatterns:cn,defaultParseWidth:"any"}),quarter:Q({matchPatterns:un,defaultMatchWidth:"wide",parsePatterns:dn,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Q({matchPatterns:ln,defaultMatchWidth:"wide",parsePatterns:fn,defaultParseWidth:"any"}),day:Q({matchPatterns:mn,defaultMatchWidth:"wide",parsePatterns:hn,defaultParseWidth:"any"}),dayPeriod:Q({matchPatterns:gn,defaultMatchWidth:"any",parsePatterns:bn,defaultParseWidth:"any"})},yn={code:"en-US",formatDistance:Lt,formatLong:Xt,formatRelative:Gt,localize:en,match:wn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pn(t){const e=O(t);return Yt(e,Vt(e))+1}function kn(t){const e=O(t),n=+Z(e)-+Ft(e);return Math.round(n/Ee)+1}function Te(t,e){var h,b,C,D;const n=O(t),r=n.getFullYear(),a=ee(),o=(e==null?void 0:e.firstWeekContainsDate)??((b=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:b.firstWeekContainsDate)??a.firstWeekContainsDate??((D=(C=a.locale)==null?void 0:C.options)==null?void 0:D.firstWeekContainsDate)??1,i=B(t,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const c=z(i,e),l=B(t,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const f=z(l,e);return n.getTime()>=c.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function vn(t,e){var c,l,f,h;const n=ee(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,a=Te(t,e),o=B(t,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),z(o,e)}function Pn(t,e){const n=O(t),r=+z(n,e)-+vn(n,e);return Math.round(r/Ee)+1}function g(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const F={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return g(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):g(n+1,2)},d(t,e){return g(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return g(t.getHours()%12||12,e.length)},H(t,e){return g(t.getHours(),e.length)},m(t,e){return g(t.getMinutes(),e.length)},s(t,e){return g(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return g(a,e.length)}},I={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ge={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return F.y(t,e)},Y:function(t,e,n,r){const a=Te(t,r),o=a>0?a:1-a;if(e==="YY"){const i=o%100;return g(i,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):g(o,e.length)},R:function(t,e){const n=We(t);return g(n,e.length)},u:function(t,e){const n=t.getFullYear();return g(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return g(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return g(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return F.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return g(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const a=Pn(t,r);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):g(a,e.length)},I:function(t,e,n){const r=kn(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):g(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):F.d(t,e)},D:function(t,e,n){const r=pn(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):g(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return g(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return g(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),a=r===0?7:r;switch(e){case"i":return String(a);case"ii":return g(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let a;switch(r===12?a=I.noon:r===0?a=I.midnight:a=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let a;switch(r>=17?a=I.evening:r>=12?a=I.afternoon:r>=4?a=I.morning:a=I.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return F.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):F.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):g(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):g(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):F.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):F.s(t,e)},S:function(t,e){return F.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return we(r);case"XXXX":case"XX":return A(r);case"XXXXX":case"XXX":default:return A(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return we(r);case"xxxx":case"xx":return A(r);case"xxxxx":case"xxx":default:return A(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+be(r,":");case"OOOO":default:return"GMT"+A(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+be(r,":");case"zzzz":default:return"GMT"+A(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return g(r,e.length)},T:function(t,e,n){const r=t.getTime();return g(r,e.length)}};function be(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),o=r%60;return o===0?n+String(a):n+String(a)+e+g(o,2)}function we(t,e){return t%60===0?(t>0?"-":"+")+g(Math.abs(t)/60,2):A(t,e)}function A(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=g(Math.trunc(r/60),2),o=g(r%60,2);return n+a+e+o}const ye=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Ne=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Cn=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return ye(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",ye(r,e)).replace("{{time}}",Ne(a,e))},xn={p:Ne,P:Cn},On=/^D+$/,Mn=/^Y+$/,Sn=["D","DD","YY","YYYY"];function _n(t){return On.test(t)}function Dn(t){return Mn.test(t)}function En(t,e,n){const r=Wn(t,e,n);if(console.warn(r),Sn.includes(t))throw new RangeError(r)}function Wn(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Tn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Yn=/^'([^]*?)'?$/,Fn=/''/g,Rn=/[a-zA-Z]/;function pe(t,e,n){var h,b,C,D,W,T,q,N;const r=ee(),a=(n==null?void 0:n.locale)??r.locale??yn,o=(n==null?void 0:n.firstWeekContainsDate)??((b=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:b.firstWeekContainsDate)??r.firstWeekContainsDate??((D=(C=r.locale)==null?void 0:C.options)==null?void 0:D.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((T=(W=n==null?void 0:n.locale)==null?void 0:W.options)==null?void 0:T.weekStartsOn)??r.weekStartsOn??((N=(q=r.locale)==null?void 0:q.options)==null?void 0:N.weekStartsOn)??0,c=O(t);if(!qt(c))throw new RangeError("Invalid time value");let l=e.match(Nn).map(v=>{const P=v[0];if(P==="p"||P==="P"){const y=xn[P];return y(v,a.formatLong)}return v}).join("").match(Tn).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const P=v[0];if(P==="'")return{isToken:!1,value:qn(v)};if(ge[P])return{isToken:!0,value:v};if(P.match(Rn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(l=a.localize.preprocessor(c,l));const f={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return l.map(v=>{if(!v.isToken)return v.value;const P=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Dn(P)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&_n(P))&&En(P,e,String(t));const y=ge[P[0]];return y(c,P,a.localize,f)}).join("")}function qn(t){const e=t.match(Yn);return e?e[1].replace(Fn,"'"):t}const R=new Map;R.set("NInput",rt);R.set("NInputNumber",at);R.set("NSelect",ot);R.set("NSwitch",it);R.set("NCheckbox",st);R.set("NDatePicker",ct);R.set("NTimePicker",ut);const Vn=({component:t="NInput",ruleMessage:e,popoverVisible:n,editRule:r},{attrs:a})=>{const o=R.get(t),i=L(o,a);return r?L(Pe,{show:!!n,animated:!1,class:"c-red"},{trigger:()=>L("div",null,[L(i)]),default:()=>L("span",{},{default:()=>e})}):i},An=J({props:{createVNode:Function,value:String,editValues:{type:Object,default:{}}},render(){const{value:t,editValues:e}=this;if(this.createVNode)return this.createVNode({value:t,editValues:e})}}),Ln=J({name:"EditableCell",__name:"EditableCell",props:{column:{},value:{},record:{},index:{},emit:{}},setup(t){const e=t,n=S(e.value),r=S(e.value),a=S(""),o=S(!1),i=S(e.column.editRenders),c=k(()=>e.record.editValueRefs),l=k(()=>e.column.editRule),f=k(()=>w(a)&&w(o));te(()=>{r.value=e.value}),te(()=>{e.record.editable&&C()}),te(()=>{var s;(s=e.record.editValueRefs)!=null&&s[e.column.key]&&N()});const h=k(()=>e.column.editCompClass);async function b(s){const{emit:u,record:d,index:m,column:p}=e,{editComponent:x,editComponentProps:M}=p;if(x==="NDatePicker"){const $=M==null?void 0:M.valueFormat;$?U(s)?n.value=s.map(He=>pe(He,$)):ue(s)&&(n.value=pe(s,$)):n.value=s}else n.value=s;await lt(),u("edit-change",{record:d,index:m,value:w(n),key:p.key}),await N()}async function C(){W("cancelCbs",P),W("submitCbs",E),W("validCbs",N),y(),V(),e.record.onSubmitEdit=async()=>T(),e.record.onCancelEdit=()=>v()}function D(){const{record:s}=e;["submitCbs","validCbs","cancelCbs"].forEach(d=>{var m;(m=s[d])!=null&&m.length&&(s[d]=[])})}function W(s,u){var m;const{record:d}=e;d&&(U(d[s])?(m=d[s])==null||m.push(u):d[s]=[u])}async function T(){var p,x;if(!await q())return!1;U((p=e.record)==null?void 0:p.submitCbs)&&((x=e.record)==null||x.submitCbs.forEach(M=>M()));const{record:u,index:d,emit:m}=e;return m("edit-submit",{record:Y(u),index:d}),D(),Y(u)}async function q(){var d;const s=(((d=e.record)==null?void 0:d.validCbs)||[]).map(m=>m());return(await Promise.all(s)).every(m=>!!m)}async function N(){var x;const{column:s,record:u}=e,{editRule:d,editComponent:m}=s,p=(x=u.editValueRefs)==null?void 0:x[s.key];if(Ce(d)){if(!p&&!ue(p))return H(!0,(ht(m)||"")+s.title),!1}else if(re(d))try{const M=await d(p,u);return M&&H(!1,""),M}catch(M){const $=M.message;return H(!0,$),!1}return H(!1,""),!0}function v(){var m,p;U((m=e.record)==null?void 0:m.cancelCbs)&&((p=e.record)==null||p.cancelCbs.forEach(x=>x()));const{record:s,index:u,emit:d}=e;d("edit-cancel",{record:s,index:u})}function P(){e.record.editable=!1,n.value=r.value,H(!1,""),y(),V()}function y(){const{column:s,record:u}=e;s.key&&(u.editValueRefs||(u.editValueRefs={}),u.editValueRefs[s.key]=n)}function V(){const{column:{editRenders:s},record:u}=e;if(s&&s.length){const{editValueRefs:d}=u;s.forEach(m=>{const p=m.key;d&&(d[p]=S(u[p]))})}}function Y(s){return Mt(s,"editable","onEdit","onCancelEdit","onSubmitEdit","_key","submitCbs","cancelCbs","editValueRefs","validCbs")}function E(){e.record.editable=!1;const{record:s}=e;if(!s)return!1;Fe(s),Re(s),H(!1,"")}function Fe(s){const{column:u}=e,{key:d}=u;d&&le(s,d,w(n))}function Re(s){const u=w(i),d=w(c);u&&u.length&&u.forEach(m=>le(s,m.key,d==null?void 0:d[m.key]))}const qe=k(()=>{const{column:s,record:u}=e,{labelKey:d}=s,m=w(n);return dt(d)?u[d]:re(d)?d(u,m):m}),Ve=k(()=>{const{column:s,record:u}=e;return s.editable&&u.editable}),Ae=k(()=>e.column.editComponent||"NInput"),Le=k(()=>{const{column:{editComponent:s}}=e;return s?["NCheckbox"].includes(s):!1}),Be=k(()=>{const{column:s}=e,{editComponentProps:u,editComponent:d}=s,m=w(Le);let p=m?"checked":"value";const x=m?"on-update:checked":"on-update:value";return d==="NDatePicker"&&u!=null&&u.valueFormat&&(p="formatted-value"),{clearable:!0,[p]:w(n),[x]:b,...u||{}}});function H(s,u){o.value=s,a.value=u}return(s,u)=>{const d=ft;return Ve.value?(_(),K("div",{key:1,class:de(h.value)},[ae(w(Vn),se(Be.value,{component:Ae.value,ruleMessage:a.value,popoverVisible:f.value,editRule:l.value}),null,16,["component","ruleMessage","popoverVisible","editRule"]),(_(!0),K(Oe,null,Me(i.value,m=>{var p;return _(),X(w(An),{key:m.key,"create-v-node":m.render,value:(p=c.value)==null?void 0:p[m.key],"edit-values":c.value},null,8,["create-v-node","value","edit-values"])}),128))],2)):(_(),X(d,{key:0,class:de(`${s.column.width?`max-w: ${s.column.width}`:""}`)},{default:j(()=>[ie(xe(qe.value),1)]),_:1},8,["class"]))}}}),Bn={class:"space-x-2"},ke=J({__name:"ActionButton",props:{actions:{},record:{}},emits:["handleClick"],setup(t,{emit:e}){const n=e,{iconRender:r}=Se(),a={type:"primary",size:"small"};function o(i){n("handleClick",i)}return(i,c)=>{const l=_e;return _(),K("div",Bn,[(_(!0),K(Oe,null,Me(i.actions,(f,h)=>(_(),X(l,se({key:`${h}-${f.title}`,ref_for:!0},w(oe)({},a,f.componentProps),{"render-icon":w(r)(f.iconConfig||{}),onClick:b=>o(f.title)}),{default:j(()=>[ie(xe(f.title),1)]),_:2},1040,["render-icon","onClick"]))),128))])}}}),Hn=J({__name:"ActionColumn",props:{actions:{},index:{},record:{},showDropdown:{type:Boolean,default:!0}},emits:["handleClick"],setup(t,{emit:e}){const n=t,r=e,a=k(()=>{const{actions:l,record:f,index:h}=n;return l(f,h).filter(b=>Ce(b.show)?b.show:!b.show)}),{iconRender:o}=Se(),i=k(()=>{var l;return n.actions?n.showDropdown&&((l=n.actions)==null?void 0:l.length)>2:!1});function c(l){r("handleClick",{title:l,record:n.record,index:n.index})}return(l,f)=>{const h=_e,b=Pe;return i.value?(_(),X(b,{key:1,trigger:"click",placement:"bottom"},{trigger:j(()=>[ae(h,{type:"primary","render-icon":w(o)({icon:"ep:arrow-down-bold"}),"icon-placement":"right"},{default:j(()=>f[0]||(f[0]=[ie(" 更多 ")])),_:1},8,["render-icon"])]),default:j(()=>[ae(ke,{actions:a.value,record:l.record,onHandleClick:c},null,8,["actions","record"])]),_:1})):(_(),X(ke,{key:0,actions:a.value,record:l.record,onHandleClick:c},null,8,["actions","record"]))}}});function In(t,e){return(n,r)=>{const a=t.key,o=n[a];return n.onEdit=async i=>{n.editable=i},L(Ln,{column:t,value:o,record:n,index:r,emit:e})}}function Ye(t,e){t.forEach(n=>{const{editable:r}=n;return r&&(n.children&&n.children.length?Ye(n.children,e):n.editable&&(n.render=In(n,e))),n})}function Xn(t,e){if(!t)return;const{actions:n,...r}=t;return{...r,key:"_action",render(a,o){const i=S(a);return n?L(Hn,{actions:n,record:i.value,index:o,onHandleClick:c=>{e("handle-action",c)}}):null}}}function $n(t,e,n){const r=Xn(e,n);if(r){const a=t.findIndex(o=>o.key==="_action");a===-1?t.push(r):t.splice(a,1,r)}}function Gn(t,e){const{columns:n,actionColumn:r}=t.value,a=k(()=>w(r));return $n(n,w(a),e),{getColumns:k(()=>(Ye(n,e),n))}}const zn=J({__name:"index",props:{data:{},columns:{},actionColumn:{},remote:{type:Boolean,default:!1},striped:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},bottomBordered:{type:Boolean,default:!0},flexHeight:{type:Boolean,default:!0},showPagination:{type:Boolean,default:!0},pagination:{type:[Object,Boolean]},requestApi:{},requestParams:{}},emits:["handle-action","edit-submit","edit-cancel","edit-change","request-success","request-error"],setup(t,{expose:e,emit:n}){const r=t,a=n,o=S(null),i=k(()=>({...r})),{getPagination:c,setPagination:l}=Dt(w(i)),{getLoading:f,setLoading:h}=Et(),{getColumns:b}=Gn(i,a),{requestData:C}=Wt({emit:a,setLoading:h,requestApi:w(i).requestApi,setPagination:l,getPagination:c}),D=k(()=>{const y=V=>V.reduce((Y,E)=>(Y+=+(E.width||0),E.children&&E.children.length>0&&(Y+=y(E.children)),Y),0);return y(r.columns)}),W=k(()=>({...w(i),columns:w(b),scrollX:w(D),pagination:c(),loading:w(f)}));async function T(y){try{await C(y)}catch(V){throw new Error(`${V}`)}}const q=k(()=>{const{requestParams:y}=r;return y?re(y)?y():y:{}});async function N(y){l({page:y}),await T(q.value)}async function v(y){l({page:1,pageSize:y}),await T(q.value)}return e({...{setPagination:l,reloadData:T,setLoading:h},tableElRef:o}),(y,V)=>{const Y=mt;return _(),X(Y,se({ref_key:"tableElRef",ref:o},W.value,{"row-key":E=>E.id||E._key,"onUpdate:page":N,"onUpdate:pageSize":v}),null,16,["row-key"])}}});export{zn as _};
