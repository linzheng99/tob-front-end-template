import{_ as z}from"./HandleRoleModal.vue_vue_type_script_setup_true_lang-20e304e8.js";import{e as A,f as o,ao as _,aK as B,Y as F,Z as M,$ as n,a5 as y,a3 as P,a8 as r,ac as c,ar as v,_ as E}from"./index-d0818fe1.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_lang-fb76c1e8.js";import{u as T,F as V}from"./useForm-417a659a.js";import{a as G,d as L}from"./index-fab1141e.js";import{c as D}from"./index-a55e0f6c.js";import"./index-443f46b2.js";import"./createPlaceholder-447273ac.js";const I={class:"h-flex-col"},H={class:"mb-4 flex gap-2"},X=A({__name:"index",setup(K){const u=o(),p=o(),i=o({page:1,pageSize:10}),h=o("add"),[k,{getFieldsValue:x,resetFields:R}]=T({schemas:$(),showActionButtonGroup:!1,gridProps:{cols:4,xGap:10,yGap:0}}),d=o([]),w=_([{title:"序号",key:"index",width:60,align:"center",render:(t,e)=>`${e+1}`},{title:"角色名",key:"name",ellipsis:{tooltip:!0}},{title:"角色备注",key:"remark",ellipsis:{tooltip:!0}},{title:"创建时间",key:"createTime",ellipsis:{tooltip:!0}},{title:"更新时间",key:"updateTime",ellipsis:{tooltip:!0}}]),b=_({key:"_action",title:"操作",align:"center",fixed:"right",width:260,actions:()=>C()}),m=o(null);function C(){return[{iconConfig:{icon:"ep-edit"},title:"编辑"},{iconConfig:{icon:"ep-delete"},title:"删除",componentProps:{type:"error"}}]}function $(){return[{field:"name",component:"NInput",label:"角色名",componentProps:{placeholder:"请输入角色名"}}]}async function q(t){const{title:e,record:a}=t;switch(e){case"编辑":g("edit",a.id);break;case"删除":D({content:{type:"warning"},onPositiveClick:async()=>{await L(a.id),s("search")}});break}}function S(t){d.value=t}async function f(t){var e;await((e=u.value)==null?void 0:e.reloadData(t))}function g(t,e){var a;h.value=t,m.value=e||null,(a=p.value)==null||a.toggleModal()}async function s(t){t==="search"?i.value=v({},i.value,x()):i.value=v({page:1,pageSize:10},R()),await f(i.value)}return B(async()=>{await f()}),(t,e)=>{const a=E;return F(),M("div",I,[n(V,{"label-width":"auto","label-align":"left",onRegister:y(k)},null,8,["onRegister"]),P("div",H,[n(a,{type:"primary",size:"small",onClick:e[0]||(e[0]=l=>g("add"))},{default:r(()=>[c(" 新增角色 ")]),_:1}),n(a,{type:"primary",size:"small",onClick:e[1]||(e[1]=l=>s("search"))},{default:r(()=>[c(" 查询 ")]),_:1}),n(a,{type:"primary",size:"small",onClick:e[2]||(e[2]=l=>s("clear"))},{default:r(()=>[c(" 清空 ")]),_:1})]),n(N,{ref_key:"tableElRef",ref:u,class:"flex-1",data:d.value,columns:w,"action-column":b,"flex-height":!1,"request-api":y(G),"request-params":i.value,onRequestSuccess:S,onHandleAction:q},null,8,["data","columns","action-column","request-api","request-params"]),n(z,{id:m.value,ref_key:"handleRoleModalRef",ref:p,onSuccess:e[3]||(e[3]=l=>s("search"))},null,8,["id"])])}}});export{X as default};
