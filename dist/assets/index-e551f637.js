import{_ as F}from"./HandleUserModal.vue_vue_type_script_setup_true_lang-32f80fa4.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-3e5308f3.js";import{u as q,F as U}from"./useForm-60c9b58b.js";import{e as z,f as a,ao as v,aI as A,Y as B,Z as I,$ as n,a5 as k,a3 as M,a8 as r,ac as c,aV as V,_ as S,aW as T}from"./index-7b7dfb38.js";import{c as E}from"./index-a55e0f6c.js";import"./index-9b819191.js";import"./index-3265f94d.js";import"./index-12bc85db.js";import"./createPlaceholder-6fcd5da5.js";const G={class:"h-flex-col"},L={class:"mb-4 flex gap-2"},X=z({__name:"index",setup(D){const p=a(),u=a(),i=a({}),d=a(),m=a("add"),[_,{getFieldsValue:h,resetFields:x}]=q({schemas:b(),showActionButtonGroup:!1,gridProps:{cols:4,xGap:10,yGap:0}});function b(){return[{field:"username",component:"NInput",label:"用户名",componentProps:{placeholder:"请输入用户名"}},{field:"nickName",component:"NInput",label:"昵称",componentProps:{placeholder:"请输入昵称"}},{field:"email",component:"NInput",label:"邮箱",componentProps:{placeholder:"请输入邮箱"}}]}const f=a([]),w=v([{title:"序号",key:"index",width:60,align:"center",render:(t,e)=>`${e+1}`},{title:"用户名",key:"username",ellipsis:{tooltip:!0}},{title:"昵称",key:"nickName",ellipsis:{tooltip:!0}},{title:"邮箱",key:"email",ellipsis:{tooltip:!0}},{title:"是否冻结",key:"isFrozen",ellipsis:{tooltip:!0},render:t=>t.isFrozen?"冻结":"未冻结"},{title:"创建时间",key:"createTime",ellipsis:{tooltip:!0}},{title:"更新时间",key:"updateTime",ellipsis:{tooltip:!0}}]),C=v({key:"_action",title:"操作",align:"center",fixed:"right",width:260,actions:()=>N()});function N(){return[{iconConfig:{icon:"ep-edit"},title:"编辑"},{iconConfig:{icon:"ep-delete"},title:"删除",componentProps:{type:"error"}}]}async function R(t){const{title:e,record:o}=t;switch(e){case"编辑":g("edit",o.id);break;case"删除":E({content:{type:"warning"},onPositiveClick:async()=>{await T(o.id),s("search")}});break}}function $(t){f.value=t}async function y(t){var e;await((e=p.value)==null?void 0:e.reloadData(t))}function g(t,e){var o;m.value=t,d.value=e||void 0,(o=u.value)==null||o.toggleModal()}async function s(t){t==="search"?i.value=h():i.value=x(),await y(i.value)}return A(async()=>{await y()}),(t,e)=>{const o=S;return B(),I("div",G,[n(U,{"label-width":"auto","label-align":"left",onRegister:k(_)},null,8,["onRegister"]),M("div",L,[n(o,{type:"primary",size:"small",onClick:e[0]||(e[0]=l=>g("add"))},{default:r(()=>e[4]||(e[4]=[c(" 新增用户 ")])),_:1}),n(o,{type:"primary",size:"small",onClick:e[1]||(e[1]=l=>s("search"))},{default:r(()=>e[5]||(e[5]=[c(" 查询 ")])),_:1}),n(o,{type:"primary",size:"small",onClick:e[2]||(e[2]=l=>s("clear"))},{default:r(()=>e[6]||(e[6]=[c(" 清空 ")])),_:1})]),n(P,{ref_key:"tableElRef",ref:p,class:"flex-1",data:f.value,columns:w,"action-column":C,"flex-height":!1,"request-api":k(V),"request-params":i.value,onRequestSuccess:$,onHandleAction:R},null,8,["data","columns","action-column","request-api","request-params"]),n(F,{id:d.value,ref_key:"handleUserModalRef",ref:u,type:m.value,onSuccess:e[3]||(e[3]=l=>s("search"))},null,8,["id","type"])])}}});export{X as default};
